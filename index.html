<!DOCTYPE html>
<html>
<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.3.5/shaka-player.min.js"></script>
</head>
<body>
    <video id="video" width="640" controls autoplay></video>
    <script>
        async function initPlayer() {
            // رابط الـ MPD الخاص بالفيديو
            const manifestUri = "https://live-d-01-todtv-da.akamaized.net/variant/v1blackout/spo-hd-08-d/DASH_DASH/Live/channel(spo-hd-08)/manifest.mpd?vcfilter=9bec116b-9c76-4f83-81f6-77bc0444e16d&hdnts=st=1735327271~exp=1735341671~acl=/variant/v1blackout/spo-hd-08-d/*~id=153916ea-9ba7-4ad8-b9b9-3e30b78b0a5a~hmac=5ff415259f19dd4766b8229924f75a6e9c0812ab1aad21c0fa63a536f3be41f2";

            // مفتاح ClearKey
            const clearKeys = {
                '0a7934dddc3136a6922584b96c3fd1e5': '676e6d1dd00bfbe266003efaf0e3aa02'
            };

            // إنشاء مشغل الفيديو
            const videoElement = document.getElementById('video');
            const player = new shaka.Player(videoElement);

            // إعداد التشفير باستخدام ClearKey
            player.configure({
                drm: {
                    clearKeys: clearKeys
                }
            });

            // تحميل الفيديو
            try {
                await player.load(manifestUri);
                console.log('Video loaded successfully!');
            } catch (error) {
                console.error('Error loading video:', error);
            }
        }

        document.addEventListener('DOMContentLoaded', initPlayer);
    </script>
</body>
</html>
